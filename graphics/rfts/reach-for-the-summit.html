<!DOCTYPE html>
<html lang="en-US">

<head>
    <link rel="stylesheet" href="reach-for-the-summit.css" type="text/css" />
</head>

<body>
    <div class="lineTop"></div>
    <div class="lineMiddle"></div>
    <div class="lineBottom"></div>

    <canvas id="cheating" width="76.5" height="740"></canvas>

    <div class="playerMarker"></div>
    <div class="playerTags" id="players">
        <div class="player">
            <p>test</p>
            <div class="box"></div>
        </div>
    </div>

    <script>
        const playersReplicant = nodecg.Replicant('players')

        playersReplicant.on('change', (newValue, oldValue) => {
            updatePlayers(newValue)
        })

        updatePlayers(playersReplicant.value || {})

        function updatePlayers(newObj) {
            let nodes = [];
            Object.values(newObj).forEach(player => {
                let div = document.createElement('div');
                div.className = "player";
                let p = document.createElement('p');
                p.innerText = player;
                p.innerText = p.innerText.replace(/ /g, '\u00a0')//NBSP
                div.appendChild(p);
                let bg = document.createElement('div');
                bg.className = "box";
                div.appendChild(bg);
                nodes.push(div)
            });
            let playerNode = document.getElementById('players');
            playerNode.innerHTML = '';
            nodes.forEach(node => playerNode.appendChild(node));
        }
    </script>
</body>

</html>